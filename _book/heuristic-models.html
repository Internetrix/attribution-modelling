<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>8 Heuristic Models | The Internetrix Advanced Guide to Attribution Modelling</title>
  <meta name="description" content="This is an Internetrix guide on advanced marketing attribution modelling for eCommerce data">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="8 Heuristic Models | The Internetrix Advanced Guide to Attribution Modelling" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="img/cover.png" />
  <meta property="og:description" content="This is an Internetrix guide on advanced marketing attribution modelling for eCommerce data" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 Heuristic Models | The Internetrix Advanced Guide to Attribution Modelling" />
  
  <meta name="twitter:description" content="This is an Internetrix guide on advanced marketing attribution modelling for eCommerce data" />
  <meta name="twitter:image" content="img/cover.png" />

<meta name="author" content="Dean Marchiori - Head of Data Science, Internetrix">
<meta name="author" content="Tiffany Chen - Data Analyst, Internetrix">


<meta name="date" content="2019-05-07">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="extracting-data-from-bigquery.html">
<link rel="next" href="algorithmic-methods.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">Home</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#contact-internetrix"><i class="fa fa-check"></i><b>1.1</b> Contact Internetrix</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#what-is-attribution-modelling"><i class="fa fa-check"></i><b>2.1</b> What is attribution modelling</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#definitions"><i class="fa fa-check"></i><b>2.2</b> Definitions</a></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#scope-of-this-paper"><i class="fa fa-check"></i><b>2.3</b> Scope of this paper</a></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#where-to-go-for-further-help"><i class="fa fa-check"></i><b>2.4</b> Where to go for further help</a></li>
</ul></li>
<li class="part"><span><b>I Online Attribution</b></span></li>
<li class="chapter" data-level="3" data-path="types-of-attribution.html"><a href="types-of-attribution.html"><i class="fa fa-check"></i><b>3</b> Types of Attribution</a><ul>
<li class="chapter" data-level="3.1" data-path="types-of-attribution.html"><a href="types-of-attribution.html#group-vs.individual-attribution"><i class="fa fa-check"></i><b>3.1</b> Group vs. Individual Attribution</a></li>
<li class="chapter" data-level="3.2" data-path="types-of-attribution.html"><a href="types-of-attribution.html#simplistic-vs.fractional-modelling"><i class="fa fa-check"></i><b>3.2</b> Simplistic vs. Fractional Modelling</a><ul>
<li class="chapter" data-level="3.2.1" data-path="types-of-attribution.html"><a href="types-of-attribution.html#simplistic-modelling"><i class="fa fa-check"></i><b>3.2.1</b> Simplistic modelling</a></li>
<li class="chapter" data-level="3.2.2" data-path="types-of-attribution.html"><a href="types-of-attribution.html#fractional-modelling"><i class="fa fa-check"></i><b>3.2.2</b> Fractional modelling</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="types-of-attribution.html"><a href="types-of-attribution.html#heuristic-vs.algorithmic-modelling"><i class="fa fa-check"></i><b>3.3</b> Heuristic vs. Algorithmic Modelling</a><ul>
<li class="chapter" data-level="3.3.1" data-path="types-of-attribution.html"><a href="types-of-attribution.html#the-heuristic-model"><i class="fa fa-check"></i><b>3.3.1</b> The Heuristic model</a></li>
<li class="chapter" data-level="3.3.2" data-path="types-of-attribution.html"><a href="types-of-attribution.html#the-algorithmic-model"><i class="fa fa-check"></i><b>3.3.2</b> The Algorithmic model</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="types-of-attribution.html"><a href="types-of-attribution.html#classification-of-methods"><i class="fa fa-check"></i><b>3.4</b> Classification of Methods</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="methods.html"><a href="methods.html"><i class="fa fa-check"></i><b>4</b> Methods</a><ul>
<li class="chapter" data-level="4.1" data-path="methods.html"><a href="methods.html#simplisitic-methods"><i class="fa fa-check"></i><b>4.1</b> Simplisitic Methods</a><ul>
<li class="chapter" data-level="4.1.1" data-path="methods.html"><a href="methods.html#last-touch"><i class="fa fa-check"></i><b>4.1.1</b> Last Touch</a></li>
<li class="chapter" data-level="4.1.2" data-path="methods.html"><a href="methods.html#first-touch"><i class="fa fa-check"></i><b>4.1.2</b> First Touch</a></li>
<li class="chapter" data-level="4.1.3" data-path="methods.html"><a href="methods.html#others"><i class="fa fa-check"></i><b>4.1.3</b> Others</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="methods.html"><a href="methods.html#fractional-heuristic-methods"><i class="fa fa-check"></i><b>4.2</b> Fractional Heuristic Methods</a><ul>
<li class="chapter" data-level="4.2.1" data-path="methods.html"><a href="methods.html#linear"><i class="fa fa-check"></i><b>4.2.1</b> Linear</a></li>
<li class="chapter" data-level="4.2.2" data-path="methods.html"><a href="methods.html#time-decay"><i class="fa fa-check"></i><b>4.2.2</b> Time Decay</a></li>
<li class="chapter" data-level="4.2.3" data-path="methods.html"><a href="methods.html#position-based"><i class="fa fa-check"></i><b>4.2.3</b> Position Based</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="methods.html"><a href="methods.html#fractional-algorithmic-methods"><i class="fa fa-check"></i><b>4.3</b> Fractional Algorithmic Methods</a><ul>
<li class="chapter" data-level="4.3.1" data-path="methods.html"><a href="methods.html#logistic-regression"><i class="fa fa-check"></i><b>4.3.1</b> Logistic Regression</a></li>
<li class="chapter" data-level="4.3.2" data-path="methods.html"><a href="methods.html#shapley-value"><i class="fa fa-check"></i><b>4.3.2</b> Shapley Value</a></li>
<li class="chapter" data-level="4.3.3" data-path="methods.html"><a href="methods.html#markov-methods"><i class="fa fa-check"></i><b>4.3.3</b> Markov Methods</a></li>
<li class="chapter" data-level="4.3.4" data-path="methods.html"><a href="methods.html#survivial-analysis"><i class="fa fa-check"></i><b>4.3.4</b> Survivial Analysis</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="methods.html"><a href="methods.html#comparison-of-methods"><i class="fa fa-check"></i><b>4.4</b> Comparison of Methods</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="google-analytics-data.html"><a href="google-analytics-data.html"><i class="fa fa-check"></i><b>5</b> Google Analytics Data</a><ul>
<li class="chapter" data-level="5.1" data-path="google-analytics-data.html"><a href="google-analytics-data.html#survey-of-basic-methods-in-google-analytics"><i class="fa fa-check"></i><b>5.1</b> Survey of Basic Methods in Google Analytics</a></li>
<li class="chapter" data-level="5.2" data-path="google-analytics-data.html"><a href="google-analytics-data.html#about-data-driven-attribution"><i class="fa fa-check"></i><b>5.2</b> About Data Driven Attribution</a><ul>
<li class="chapter" data-level="5.2.1" data-path="google-analytics-data.html"><a href="google-analytics-data.html#how-does-it-work"><i class="fa fa-check"></i><b>5.2.1</b> How does it work?</a></li>
<li class="chapter" data-level="5.2.2" data-path="google-analytics-data.html"><a href="google-analytics-data.html#limitations"><i class="fa fa-check"></i><b>5.2.2</b> Limitations</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="google-analytics-data.html"><a href="google-analytics-data.html#bigquery"><i class="fa fa-check"></i><b>5.3</b> BigQuery</a></li>
</ul></li>
<li class="part"><span><b>II Implementation Guides</b></span></li>
<li class="chapter" data-level="6" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i><b>6</b> Setup</a><ul>
<li class="chapter" data-level="6.1" data-path="setup.html"><a href="setup.html#r"><i class="fa fa-check"></i><b>6.1</b> R</a><ul>
<li class="chapter" data-level="6.1.1" data-path="setup.html"><a href="setup.html#about-r"><i class="fa fa-check"></i><b>6.1.1</b> About R</a></li>
<li class="chapter" data-level="6.1.2" data-path="setup.html"><a href="setup.html#install-r"><i class="fa fa-check"></i><b>6.1.2</b> Install R</a></li>
<li class="chapter" data-level="6.1.3" data-path="setup.html"><a href="setup.html#install-rstudio"><i class="fa fa-check"></i><b>6.1.3</b> Install RStudio</a></li>
<li class="chapter" data-level="6.1.4" data-path="setup.html"><a href="setup.html#install-required-r-packages"><i class="fa fa-check"></i><b>6.1.4</b> Install Required R Packages</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="setup.html"><a href="setup.html#bigquery-1"><i class="fa fa-check"></i><b>6.2</b> BigQuery</a><ul>
<li class="chapter" data-level="6.2.1" data-path="setup.html"><a href="setup.html#setup-1"><i class="fa fa-check"></i><b>6.2.1</b> Setup</a></li>
<li class="chapter" data-level="6.2.2" data-path="setup.html"><a href="setup.html#export-schema"><i class="fa fa-check"></i><b>6.2.2</b> Export Schema</a></li>
<li class="chapter" data-level="6.2.3" data-path="setup.html"><a href="setup.html#running-queries"><i class="fa fa-check"></i><b>6.2.3</b> Running Queries</a></li>
<li class="chapter" data-level="6.2.4" data-path="setup.html"><a href="setup.html#using-r-with-bigquery"><i class="fa fa-check"></i><b>6.2.4</b> Using R with BigQuery</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="extracting-data-from-bigquery.html"><a href="extracting-data-from-bigquery.html"><i class="fa fa-check"></i><b>7</b> Extracting Data from BigQuery</a><ul>
<li class="chapter" data-level="7.1" data-path="extracting-data-from-bigquery.html"><a href="extracting-data-from-bigquery.html#about-the-data"><i class="fa fa-check"></i><b>7.1</b> About the data</a></li>
<li class="chapter" data-level="7.2" data-path="extracting-data-from-bigquery.html"><a href="extracting-data-from-bigquery.html#get-full-event-log"><i class="fa fa-check"></i><b>7.2</b> Get full event log</a></li>
<li class="chapter" data-level="7.3" data-path="extracting-data-from-bigquery.html"><a href="extracting-data-from-bigquery.html#identify-those-who-converted"><i class="fa fa-check"></i><b>7.3</b> Identify those who converted</a></li>
<li class="chapter" data-level="7.4" data-path="extracting-data-from-bigquery.html"><a href="extracting-data-from-bigquery.html#converting-touchpoints-in-last-7-days"><i class="fa fa-check"></i><b>7.4</b> Converting touchpoints in last 7 days</a></li>
<li class="chapter" data-level="7.5" data-path="extracting-data-from-bigquery.html"><a href="extracting-data-from-bigquery.html#non-converting-touchpoints-in-last-7-days"><i class="fa fa-check"></i><b>7.5</b> Non-converting touchpoints in last 7 days</a></li>
<li class="chapter" data-level="7.6" data-path="extracting-data-from-bigquery.html"><a href="extracting-data-from-bigquery.html#complete-query"><i class="fa fa-check"></i><b>7.6</b> Complete Query</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="heuristic-models.html"><a href="heuristic-models.html"><i class="fa fa-check"></i><b>8</b> Heuristic Models</a><ul>
<li class="chapter" data-level="8.1" data-path="heuristic-models.html"><a href="heuristic-models.html#transform-data"><i class="fa fa-check"></i><b>8.1</b> Transform Data</a></li>
<li class="chapter" data-level="8.2" data-path="heuristic-models.html"><a href="heuristic-models.html#heuristic-models-1"><i class="fa fa-check"></i><b>8.2</b> Heuristic Models</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="algorithmic-methods.html"><a href="algorithmic-methods.html"><i class="fa fa-check"></i><b>9</b> Algorithmic Methods</a><ul>
<li class="chapter" data-level="9.1" data-path="algorithmic-methods.html"><a href="algorithmic-methods.html#markov-chains"><i class="fa fa-check"></i><b>9.1</b> Markov Chains</a></li>
<li class="chapter" data-level="9.2" data-path="algorithmic-methods.html"><a href="algorithmic-methods.html#survival-analysis"><i class="fa fa-check"></i><b>9.2</b> Survival Analysis</a></li>
</ul></li>
<li class="part"><span><b>III Offline Attribution</b></span></li>
<li class="chapter" data-level="10" data-path="about-offline-attribution.html"><a href="about-offline-attribution.html"><i class="fa fa-check"></i><b>10</b> About Offline Attribution</a><ul>
<li class="chapter" data-level="10.1" data-path="about-offline-attribution.html"><a href="about-offline-attribution.html#scenario"><i class="fa fa-check"></i><b>10.1</b> Scenario</a></li>
<li class="chapter" data-level="10.2" data-path="about-offline-attribution.html"><a href="about-offline-attribution.html#causal-inference-modelling"><i class="fa fa-check"></i><b>10.2</b> Causal Inference Modelling</a></li>
<li class="chapter" data-level="10.3" data-path="about-offline-attribution.html"><a href="about-offline-attribution.html#comparing-to-other-methods"><i class="fa fa-check"></i><b>10.3</b> Comparing to other methods</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The Internetrix Advanced Guide to Attribution Modelling</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="heuristic-models" class="section level1">
<h1><span class="header-section-number">8</span> Heuristic Models</h1>
<p>Here we will implement some non-algorithmic methods as a baseline. To do this we will use the <a href="https://cran.r-project.org/web/packages/ChannelAttribution">ChannelAttribution R package</a></p>
<div id="transform-data" class="section level2">
<h2><span class="header-section-number">8.1</span> Transform Data</h2>
<p>The <code>ChannelAttribution</code> package requires the data structured in a certain way. In this case it is in the form:</p>
<table>
<thead>
<tr class="header">
<th>path</th>
<th>conversion</th>
<th>non-conversions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>direct &gt; social &gt; search</td>
<td>10</td>
<td>154</td>
</tr>
<tr class="even">
<td>direct &gt; direct &gt; direct</td>
<td>2</td>
<td>234</td>
</tr>
<tr class="odd">
<td>referral &gt; direct</td>
<td>7</td>
<td>187</td>
</tr>
</tbody>
</table>
<p>Here the touch points are transformed from into a single string path, separated by the <code>&gt;</code> character. For each path we aggregate the total number of conversions that resulted from this pathway, and also the number of non-conversions.</p>
<p>If you are using marketing data from a system other than BigQuery, you will need to prepare your data per the above.</p>
<p>Now we can look at the steps required to transform our data from <a href="extracting-data-from-bigquery.html#about-the-data">Chapter 7</a>.</p>
<p>In this case we have the results saved as a CSV, but these may also be queried directly in R as per <a href="setup.html#using-r-with-bigquery">Section 6.2.4</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(lubridate)

paths_raw &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&#39;bigquery/bq-results.csv&#39;</span>)</code></pre></div>
<p>Below is a snapshot of the top 20 rows. We can see from BigQuery it is in a standard ‘long’ format with one row per touch point based on the time stamp.</p>
<table>
<thead>
<tr class="header">
<th align="left">fullVisitorId</th>
<th align="left">visitStartTime</th>
<th align="left">channelGrouping</th>
<th align="left">outcome</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">07184911138250312</td>
<td align="left">2017-01-18 06:57:50 UTC</td>
<td align="left">(Other)</td>
<td align="left">non_conversion</td>
</tr>
<tr class="even">
<td align="left">07184911138250312</td>
<td align="left">2017-01-18 07:40:31 UTC</td>
<td align="left">(Other)</td>
<td align="left">non_conversion</td>
</tr>
<tr class="odd">
<td align="left">07184911138250312</td>
<td align="left">2017-01-18 08:18:50 UTC</td>
<td align="left">(Other)</td>
<td align="left">non_conversion</td>
</tr>
<tr class="even">
<td align="left">3112985461863519829</td>
<td align="left">2017-01-25 20:42:23 UTC</td>
<td align="left">(Other)</td>
<td align="left">non_conversion</td>
</tr>
<tr class="odd">
<td align="left">4720404071621394560</td>
<td align="left">2017-01-18 07:02:40 UTC</td>
<td align="left">(Other)</td>
<td align="left">non_conversion</td>
</tr>
<tr class="even">
<td align="left">6060076679741207514</td>
<td align="left">2017-01-18 06:59:27 UTC</td>
<td align="left">(Other)</td>
<td align="left">non_conversion</td>
</tr>
<tr class="odd">
<td align="left">0003297619580760716</td>
<td align="left">2017-01-08 05:50:50 UTC</td>
<td align="left">Direct</td>
<td align="left">non_conversion</td>
</tr>
<tr class="even">
<td align="left">00035794135966385</td>
<td align="left">2017-01-20 12:46:25 UTC</td>
<td align="left">Direct</td>
<td align="left">non_conversion</td>
</tr>
<tr class="odd">
<td align="left">0004867638405459898</td>
<td align="left">2017-01-15 14:22:26 UTC</td>
<td align="left">Direct</td>
<td align="left">non_conversion</td>
</tr>
<tr class="even">
<td align="left">0005604256236421547</td>
<td align="left">2017-01-24 21:04:26 UTC</td>
<td align="left">Direct</td>
<td align="left">non_conversion</td>
</tr>
<tr class="odd">
<td align="left">0006746295360194683</td>
<td align="left">2017-01-24 05:16:18 UTC</td>
<td align="left">Direct</td>
<td align="left">non_conversion</td>
</tr>
<tr class="even">
<td align="left">0009834325573666752</td>
<td align="left">2017-01-24 22:43:34 UTC</td>
<td align="left">Direct</td>
<td align="left">non_conversion</td>
</tr>
<tr class="odd">
<td align="left">001324382917654255</td>
<td align="left">2017-01-10 18:46:32 UTC</td>
<td align="left">Direct</td>
<td align="left">non_conversion</td>
</tr>
<tr class="even">
<td align="left">0013701781325366363</td>
<td align="left">2017-01-25 15:32:52 UTC</td>
<td align="left">Direct</td>
<td align="left">non_conversion</td>
</tr>
<tr class="odd">
<td align="left">0014256672578655164</td>
<td align="left">2017-01-24 17:39:56 UTC</td>
<td align="left">Direct</td>
<td align="left">non_conversion</td>
</tr>
<tr class="even">
<td align="left">0015731153666510386</td>
<td align="left">2017-01-25 22:37:42 UTC</td>
<td align="left">Direct</td>
<td align="left">non_conversion</td>
</tr>
<tr class="odd">
<td align="left">0016316356325418630</td>
<td align="left">2017-01-09 03:08:40 UTC</td>
<td align="left">Direct</td>
<td align="left">non_conversion</td>
</tr>
<tr class="even">
<td align="left">0016883628233932470</td>
<td align="left">2017-01-04 18:02:46 UTC</td>
<td align="left">Direct</td>
<td align="left">non_conversion</td>
</tr>
<tr class="odd">
<td align="left">0017373815580187343</td>
<td align="left">2017-01-25 11:59:15 UTC</td>
<td align="left">Direct</td>
<td align="left">non_conversion</td>
</tr>
<tr class="even">
<td align="left">0018094491063949293</td>
<td align="left">2017-01-18 15:18:19 UTC</td>
<td align="left">Direct</td>
<td align="left">non_conversion</td>
</tr>
</tbody>
</table>
<p>We are using the <code>tidyverse</code> conventions here to make the interpretation easier. To translate we can see we start by formatting the time stamp correctly.<br />
Next we rank the sessions by this time stamp for each visitor so we know which order the touch points occurred. We next restructure the data by summarising the touch points into one path string. Finally we count the occurrence of conversions and non-conversions.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">paths &lt;-<span class="st"> </span>paths_raw <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">visitStartTime =</span> <span class="kw">ymd_hms</span>(visitStartTime)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(fullVisitorId, outcome) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(visitStartTime) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">path =</span> <span class="kw">paste</span>(channelGrouping, <span class="dt">collapse =</span> <span class="st">&#39; &gt; &#39;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">count</span>(outcome, path, <span class="dt">name =</span> <span class="st">&quot;n&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">spread</span>(outcome, n) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">replace_na</span>(<span class="kw">list</span>(<span class="dt">conversion =</span> <span class="dv">0</span>, <span class="dt">non_conversion =</span> <span class="dv">0</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(conversion))</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">path</th>
<th align="right">conversion</th>
<th align="right">non_conversion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Referral</td>
<td align="right">178</td>
<td align="right">4015</td>
</tr>
<tr class="even">
<td align="left">Organic Search</td>
<td align="right">137</td>
<td align="right">21659</td>
</tr>
<tr class="odd">
<td align="left">Direct</td>
<td align="right">71</td>
<td align="right">9308</td>
</tr>
<tr class="even">
<td align="left">Referral &gt; Referral</td>
<td align="right">55</td>
<td align="right">553</td>
</tr>
<tr class="odd">
<td align="left">Organic Search &gt; Organic Search</td>
<td align="right">39</td>
<td align="right">1507</td>
</tr>
<tr class="even">
<td align="left">Direct &gt; Direct</td>
<td align="right">26</td>
<td align="right">803</td>
</tr>
<tr class="odd">
<td align="left">Referral &gt; Referral &gt; Referral</td>
<td align="right">26</td>
<td align="right">132</td>
</tr>
<tr class="even">
<td align="left">Paid Search</td>
<td align="right">21</td>
<td align="right">1348</td>
</tr>
<tr class="odd">
<td align="left">Display</td>
<td align="right">12</td>
<td align="right">256</td>
</tr>
<tr class="even">
<td align="left">Direct &gt; Referral</td>
<td align="right">11</td>
<td align="right">60</td>
</tr>
</tbody>
</table>
</div>
<div id="heuristic-models-1" class="section level2">
<h2><span class="header-section-number">8.2</span> Heuristic Models</h2>
<p>Now that the data are in the correct format we can use the <code>ChannelAttribution::heuristic_models()</code> function to compare three common models: First Touch, Last Touch and Linear.</p>
<p>This function will automatically calculate the total number of conversion attributed to each channel using the above models.</p>
<p>The results across these three methods are very similar. We can see ‘Referral’ is the channel that is attributed the most credit for conversions, followed by ‘Organic Search’.</p>
<p>The Last Touch method provides slightly more credit to ‘Referral’ than other methods, in contrast to ‘Direct’, which is attributed more credit when using the First Touch method.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ChannelAttribution)

fit_h &lt;-<span class="st"> </span><span class="kw">heuristic_models</span>(<span class="dt">Data =</span> paths, <span class="dt">var_path =</span> <span class="st">&#39;path&#39;</span>, <span class="dt">var_conv =</span> <span class="st">&#39;conversion&#39;</span>)</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">channel_name</th>
<th align="right">first_touch</th>
<th align="right">last_touch</th>
<th align="right">linear_touch</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Referral</td>
<td align="right">279</td>
<td align="right">302</td>
<td align="right">290.46667</td>
</tr>
<tr class="even">
<td align="left">Organic Search</td>
<td align="right">203</td>
<td align="right">202</td>
<td align="right">202.28333</td>
</tr>
<tr class="odd">
<td align="left">Direct</td>
<td align="right">124</td>
<td align="right">106</td>
<td align="right">114.31667</td>
</tr>
<tr class="even">
<td align="left">Paid Search</td>
<td align="right">31</td>
<td align="right">26</td>
<td align="right">29.08333</td>
</tr>
<tr class="odd">
<td align="left">Display</td>
<td align="right">19</td>
<td align="right">20</td>
<td align="right">19.85000</td>
</tr>
<tr class="even">
<td align="left">Social</td>
<td align="right">6</td>
<td align="right">6</td>
<td align="right">6.00000</td>
</tr>
<tr class="odd">
<td align="left">(Other)</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0.00000</td>
</tr>
<tr class="even">
<td align="left">Affiliates</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0.00000</td>
</tr>
</tbody>
</table>
<p><img src="irx-attribution-2019_files/figure-html/unnamed-chunk-49-1.png" width="960" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="extracting-data-from-bigquery.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="algorithmic-methods.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["irx-attribution-2019.pdf", "irx-attribution-2019.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
